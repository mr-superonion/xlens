description: The pipeline specialized for testing image simulation.
instrument: lsst.obs.subaru.HyperSuprimeCam

tasks:
  Catalog1:
    class: xlens.simulator.catalog.CatalogHaloTask
    config:
      rotId: 0
      mass: 8e14
      z_lens: 0.25
      z_source: 1.0
      connections.mode: 0
      connections.rotId: 0
  Catalog2:
    class: xlens.simulator.catalog.CatalogHaloTask
    config:
      rotId: 1
      mass: 8e14
      z_lens: 0.25
      z_source: 1.0
      connections.mode: 0
      connections.rotId: 1
  MutibandSim1:
    class: xlens.simulator.sim.MultibandSimTask
    config:
      survey_name: hsc
      rotId: 0
      connections.mode: 0
      connections.rotId: 0
  MutibandSim2:
    class: xlens.simulator.sim.MultibandSimTask
    config:
      survey_name: hsc
      rotId: 1
      connections.mode: 0
      connections.rotId: 1

  AnaCalTask1:
    class: xlens.process_pipe.anacal_detect.AnacalDetectPipe
    config:
      anacal.do_noise_bias_correction: True
      connections.coaddName: sim_0_rot0_
  AnaCalTask2:
    class: xlens.process_pipe.anacal_detect.AnacalDetectPipe
    config:
      anacal.do_noise_bias_correction: True
      connections.coaddName: sim_0_rot1_

  SummaryTask:
    class: xlens.analysis.cluster.HaloMcBiasMultibandPipe
    config:
      mass: 8e14
      z_lens: 0.25
      z_source: 1.0
      connections.coaddName: sim_0
      connections.dataType: joint
